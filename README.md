# 🎨 创想引擎 (Imagine Engine)

一个功能强大的 AI 图片创作平台，支持文生图、图片编辑、多图融合等多种创作功能。

## ✨ 核心功能

### 🎨 文生图创作
- **智能提示词**：支持中文描述，AI自动优化
- **多种风格**：写实、动漫、油画、水彩、赛博朋克、极简等6种艺术风格
- **即时生成**：基于先进AI模型，快速生成高质量图片
- **提示词库**：内置72+精选创意模板，分类搜索，一键应用
- **一键生成**：6个热门主题快速生成，支持随机创作
- **质量分析**：实时提示词质量评分和优化建议
- **交互式画布**：支持缩放、平移、导航大图片
- **版本历史**：完整的生成树和变体对比功能
- **键盘快捷键**：15个快捷键提升工作效率
- **历史记录**：自动保存创作历史，支持复用提示词和连续编辑

### ✂️ 图片编辑
- **智能背景移除**：AI自动识别主体，生成透明背景
- **精确橡皮擦**：手动绘制遮罩，精确移除指定区域内容
- **点击编辑**：点击图片任意位置，通过文字指令进行精确编辑
- **AI灵感建议**：智能分析图片并推荐合适的编辑操作
- **创意滤镜**：动漫、复古、赛博朋克、水彩等8种艺术风格
- **纹理叠加**：裂纹漆、木纹、金属拉丝等8种材质效果
- **画笔控制**：5-50px可调节画笔大小，适应不同精度需求
- **拖拽上传**：支持多种图片格式，简单易用
- **实时预览**：编辑过程可视化，所见即所得
- **连续编辑**：从生成器无缝跳转到编辑器，实现创作流程闭环

## 🚀 快速开始

### 环境要求
- Node.js 18.0.0+
- npm 或 yarn

### 安装依赖
```bash
npm install
```

### 配置环境变量（可选）
复制 `.env.example` 文件为 `.env.local`，然后配置您的 API 密钥：
```bash
cp .env.example .env.local
```

**注意**：API 配置现在可以直接在应用内的"设置"页面中配置，无需手动编辑环境变量文件。环境变量仅用于聊天功能的后端 API。

### 启动开发服务器
```bash
npm run dev
```

访问 `http://localhost:3000` 开始使用。

## 🏗️ 技术架构

### 技术栈
- **框架**：Next.js 14+ (App Router)
- **语言**：TypeScript
- **样式**：Tailwind CSS
- **状态管理**：React Hooks
- **API层**：Next.js API Routes

### 项目结构
```
/imagine-engine
├── src/
│   ├── app/
│   │   ├── page.tsx              # 主页面: 魔法画室
│   │   ├── editor/page.tsx       # 编辑器页面
│   │   ├── api/
│   │   │   ├── generate/route.ts # 文生图API
│   │   │   └── edit/route.ts     # 图编辑API
│   │   ├── layout.tsx            # 全局布局
│   │   └── globals.css           # 全局样式
│   ├── components/               # UI组件
│   │   ├── GeneratorInterface.tsx
│   │   ├── PromptInput.tsx
│   │   ├── StyleSelector.tsx
│   │   ├── ResultDisplay.tsx
│   │   ├── EditorInterface.tsx
│   │   ├── ImageUploader.tsx
│   │   └── Toolbox.tsx
│   └── lib/
│       └── bananaApi.ts          # API封装函数
├── .env.local                    # 环境变量
└── ... (配置文件)
```

## 🔧 API接口

### 文生图接口
- **端点**：`POST /api/generate`
- **参数**：`{ prompt: string, style: string }`
- **响应**：`{ imageUrl: string }` 或 `{ error: string }`

### 图编辑接口
- **端点**：`POST /api/edit`
- **参数**：`{ tool: 'inpaint' | 'remove_bg', image: string, mask?: string }`
- **响应**：`{ imageUrl: string }` 或 `{ error: string }`

## 🎯 设计原则

1. **无状态/零门槛**：无需注册登录，所有功能对所有访问者开放
2. **功能聚焦**：专注于文生图和图片编辑两大核心功能
3. **前端驱动**：优秀的用户体验，后端仅作为轻量级API网关
4. **即开即用**：简洁直观的界面，降低使用门槛

## 📖 使用说明

### 🎨 文生图创作
1. **快速开始**：点击一键生成按钮，体验热门主题
2. **自定义创作**：
   - 在提示词输入框中描述你想要的图片
   - 点击提示词库按钮，浏览72+精选模板
   - 选择合适的艺术风格
   - 点击"开始创作"按钮
3. **专业功能**：
   - **质量分析**：查看提示词评分和优化建议
   - **交互式预览**：缩放、平移查看生成结果
   - **版本历史**：管理所有创作版本，支持对比
   - **快捷键**：使用Ctrl+Enter快速生成等15个快捷键
4. **历史管理**：
   - 查看创作历史，点击缩略图预览
   - 复用提示词快速创作相似作品
   - 继续编辑跳转到图片编辑器

### ✂️ 图片编辑
1. **上传图片**：拖拽或选择要编辑的图片
2. **智能编辑工具**：
   - **移除背景**：点击工具，AI自动处理
   - **橡皮擦**：绘制遮罩，精确移除区域
   - **点击编辑**：点击图片位置，输入编辑指令
3. **AI辅助功能**：
   - **灵感建议**：AI分析图片推荐编辑方案
   - **创意滤镜**：8种艺术风格一键应用
   - **纹理叠加**：8种材质效果增强质感
4. **连续创作**：从生成器页面直接跳转编辑
5. **结果管理**：预览、下载或重置编辑

## 🔗 API服务

本项目使用OpenAI兼容的API格式，支持多种AI模型服务。默认使用 `gemini-2.5-flash-image-preview` 模型进行图片生成和编辑。

用户可以在应用内的"设置"页面中配置自己的 API 提供商、模型和密钥。

## 🚀 部署

### Vercel 部署（推荐）
1. Fork 本仓库到你的 GitHub 账号
2. 在 [Vercel](https://vercel.com) 中导入项目
3. 配置环境变量（如果需要聊天功能）：
   - `NANO_BANANA_API_KEY`
   - `NANO_BANANA_BASE_URL`（可选）
   - `IMAGE_API_BASE_URL`（可选）
4. 点击部署

### 其他平台部署
支持任何 Node.js 部署平台（Netlify、Railway、Render 等）：
1. 确保 Node.js 版本 >= 18.0.0
2. 安装依赖：`npm install`
3. 构建项目：`npm run build`
4. 启动服务：`npm start`

### Docker 部署
```bash
# 构建镜像
docker build -t imagine-engine .

# 运行容器
docker run -p 3000:3000 imagine-engine
```

## 🔒 安全说明

- **API 密钥安全**：本项目不包含任何硬编码的 API 密钥
- **用户配置**：用户的 API 配置存储在浏览器本地，不会上传到服务器
- **环境变量**：仅聊天功能需要在服务器端配置环境变量
- **生产部署**：建议使用环境变量管理敏感信息，不要将 `.env` 文件提交到代码库

## 📄 许可证

MIT License - 详见 LICENSE 文件

---

**让AI创作触手可及** 🚀