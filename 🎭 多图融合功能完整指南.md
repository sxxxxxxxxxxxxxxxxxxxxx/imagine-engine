# 🎭 多图融合功能完整指南

> 发布时间：2025-10-17  
> 功能版本：v1.0  
> 状态：✅ 已实现并上线

---

## 🌟 功能概述

### 什么是多图融合？

多图融合允许你同时上传**2-4张**参考图片，AI会智能分析这些图片的：
- 风格特点
- 构图元素
- 色调氛围
- 关键元素

然后将它们**融合成一张全新的图片**，根据你的提示词创作。

### 为什么需要这个功能？

**单图模式的局限**：
```
❌ 只能传达一种风格
❌ 无法表达"结合多个参考"的意图
❌ 需要用复杂文字描述多张图的内容
```

**多图融合的优势**：
```
✅ 直接"展示"给AI多个参考，无需文字描述
✅ 融合多种风格、元素、构图
✅ 创作可能性呈指数级增长
✅ 设计师/创作者的强需求功能
```

---

## 🎯 5大核心使用场景

### 场景1：风格融合 🎨

**示例**：
```
上传：
- 图1：现代简约风格海报
- 图2：复古蒸汽波风格设计
- 图3：日式极简风格

提示词："融合这3张图的设计风格，创作一张音乐专辑封面"
```

**效果**：AI会提取各图的风格特点，创作出融合了现代、复古、极简的独特封面。

---

### 场景2：元素合成 🧩

**示例**：
```
上传：
- 图1：雪山背景
- 图2：城市建筑
- 图3：未来科技元素

提示词："将这些元素合成一张赛博朋克风格的都市风景"
```

**效果**：AI会从各图中提取关键元素，合成为一张融合了自然、城市、科技的场景。

---

### 场景3：构图+色调融合 📐

**示例**：
```
上传：
- 图1：海边日落（构图参考）
- 图2：冷色调摄影作品（色调参考）

提示词："参考第1张的构图，使用第2张的冷色调重新创作"
```

**效果**：保持图1的构图美感，但应用图2的色调氛围。

---

### 场景4：商品图合成 🛍️

**示例**：
```
上传：
- 图1-4：不同角度的产品照片

提示词："将这些商品照片合成为一张电商主图展示"
```

**效果**：多角度商品整合为一张主图。

---

### 场景5：人物合影生成 👥

**示例**：
```
上传：
- 图1：人物A的独照
- 图2：人物B的独照
- 图3：聚会背景

提示词："将这两个人合成到聚会场景中，生成合影"
```

**效果**：AI将不同照片中的人物合成到统一场景。

---

## 📖 使用教程

### 步骤1：上传多张图片

#### 方法A：点击上传 ⭐
1. 访问 http://localhost:3000/create
2. 找到"参考图（可选）"区域
3. 点击上传区域
4. **按住Ctrl/Cmd选择多张图片**
5. 点击"打开"

#### 方法B：拖拽上传 ⭐⭐
1. 选中电脑上的2-4张图片
2. 直接**拖拽**到"参考图"上传区域
3. 松开鼠标，自动上传

#### 方法C：分次添加
1. 先上传第1张
2. 点击"+ 添加更多 (1/4)"按钮
3. 继续添加第2、3、4张

---

### 步骤2：查看缩略图预览

上传成功后，会显示：

```
┌────────────────────────────────┐
│ 参考图（可选）  🎭 多图融合模式│
├──────────────┬─────────────────┤
│  [图1]       │   [图2]         │
│   1          │    2            │
├──────────────┼─────────────────┤
│  [图3]       │   [图4]         │
│   3          │    4            │
├──────────────┴─────────────────┤
│ + 添加更多图片 (3/4)            │
└─────────────────────────────────┘
```

**交互功能**：
- 鼠标悬停：显示删除按钮（红色×）
- 点击删除：移除该图片
- 左下角数字：图片序号
- 右上角显示"🎭 多图融合模式"徽章

---

### 步骤3：选择融合提示词模板

当上传≥2张图片时，会自动显示**融合提示词模板**：

**6种模板**：
1. 🎨 **风格融合** - "融合这些图片的风格特点，创作一幅新的作品"
2. 🧩 **元素合成** - "结合这些图片中的关键元素，合成一张完整的图片"
3. 📐 **构图融合** - "参考第1张图的构图，融合其他图片的色调和风格"
4. ✨ **创意混合** - "将这些图片创意性地混合，生成一张视觉冲击力强的新图片"
5. 🌈 **色调融合** - "保持第1张图的主体，应用其他图片的色调和氛围"
6. 🏞️ **场景合成** - "将这些图片中的人物/物体合成到一个统一的场景中"

**使用方法**：
1. 点击"多图融合提示词模板"展开
2. 点击任意模板
3. 自动填充到提示词框
4. 可以继续编辑和个性化

---

### 步骤4：编辑提示词

**示例提示词**：
```
✅ 好的融合提示词：
"融合这3张图片的设计风格，创作一张现代感的海报，保持第1张的构图，使用第2张的色调，加入第3张的视觉元素"

✅ 也可以简单：
"将这些图片融合，生成一张新的插画"

❌ 避免：
"生成一张图片"（太模糊，没有说明如何融合）
```

**提示词技巧**：
- 明确说明"融合"或"结合"
- 可以指定某张图的特定作用（如"第1张的构图"）
- 描述期望的融合效果
- 添加风格和质量要求

---

### 步骤5：点击生成

点击"开始创作"按钮，AI会：
1. 分析所有参考图
2. 提取关键特征
3. 根据提示词融合
4. 生成全新图片

**预计时间**：10-30秒（取决于图片数量和模型）

---

## 💡 最佳实践

### 1. 图片选择

**推荐**：
- ✅ 选择风格相关或互补的图片
- ✅ 图片质量越高，融合效果越好
- ✅ 2-3张效果最佳（4张可能过于复杂）

**避免**：
- ❌ 完全不相关的图片（如：猫+汽车+建筑）
- ❌ 模糊或低质量图片
- ❌ 尺寸过小的图片（<500px）

---

### 2. 提示词撰写

**推荐结构**：
```
[融合方式] + [具体内容] + [风格要求]

示例：
"融合这些图片的风格，创作一张现代艺术海报，保持高对比度和鲜明色彩"
 ↑融合方式      ↑具体内容            ↑风格要求
```

**关键词**：
- 融合、结合、混合、合成
- 参考第X张图的...
- 提取...元素
- 保持...风格

---

### 3. 参数配置

**图片比例**：
- 1:1 - 方形，适合海报
- 16:9 - 横屏，适合背景
- 9:16 - 竖屏，适合移动端

**艺术风格**：
- 写实 - 融合真实照片
- 动漫 - 二次元风格融合
- 油画 - 艺术画作融合
- 水彩 - 清新风格融合

**模型选择**：
- gemini-2.5-flash-image - **推荐**，支持多图融合
- qwen-image - 备选
- seedream系列 - 标准生图

---

## 🎨 实战案例

### 案例1：设计海报

**上传图片**：
- 图1：几何图形设计
- 图2：霓虹色彩案例
- 图3：文字排版参考

**提示词**：
```
融合这3张图的设计元素，创作一张科技感十足的活动海报，
保持几何美感，使用霓虹色彩，加入动感的文字排版
```

**参数**：
- 比例：16:9
- 风格：赛博朋克
- 模型：gemini-2.5-flash-image

**预期效果**：现代科技风海报，融合了几何、色彩、排版三大元素

---

### 案例2：产品主图

**上传图片**：
- 图1：产品正面照
- 图2：产品侧面照
- 图3：使用场景图

**提示词**：
```
将这些产品图合成为一张电商主图，展示产品的不同角度和使用场景，
采用专业摄影风格，白色背景，高清细节
```

**参数**：
- 比例：1:1
- 风格：写实
- 模型：seedream-4.0-2k

**预期效果**：专业的电商主图，多角度展示产品

---

### 案例3：艺术创作

**上传图片**：
- 图1：城市街景
- 图2：星空照片

**提示词**：
```
融合城市和星空，创作一张超现实主义风格的作品，
让星空出现在城市街道上，营造梦幻氛围
```

**参数**：
- 比例：3:4
- 风格：油画
- 模型：gemini-2.5-flash-image

**预期效果**：超现实风格的城市星空融合画

---

## ⚙️ 技术说明

### 支持的API

✅ **已验证支持多图融合**：
- Google Gemini 2.5 Flash Image
- Qwen Image Edit
- 其他OpenAI兼容的图像API

### 图片处理流程

```
用户上传多图
    ↓
前端读取为Base64
    ↓
传递到后端API
    ↓
构建多图消息内容
    ↓
发送给AI API
    ↓
AI分析所有图片
    ↓
根据提示词融合
    ↓
返回生成的图片
```

### 消息格式

```json
{
  "model": "gemini-2.5-flash-image",
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "image_url",
          "image_url": { "url": "data:image/png;base64,..." }
        },
        {
          "type": "image_url",
          "image_url": { "url": "data:image/png;base64,..." }
        },
        {
          "type": "text",
          "text": "融合这些图片..."
        }
      ]
    }
  ]
}
```

---

## 🎓 进阶技巧

### 技巧1：指定图片权重

虽然系统暂不支持权重调整，但可以通过提示词实现：

```
"以第1张图为主，融入第2张的色调，轻微参考第3张的风格"
 ↑主要参考      ↑次要参考        ↑辅助参考
```

### 技巧2：分层融合

```
"将第1张图作为背景层，第2张图的主体放在前景，
第3张图提供光线和氛围"
```

### 技巧3：风格迁移

```
上传：
- 图1：你的照片
- 图2：梵高《星空》

提示词："将第1张图用第2张的绘画风格重新创作"
```

---

## 📱 界面操作指南

### 上传区域状态

**无图片时**：
```
┌─────────────────────────────────┐
│   📷                             │
│   点击或拖拽上传参考图           │
│   可选 · 支持多图融合（最多4张）│
└─────────────────────────────────┘
```

**拖拽时**：
```
┌─────────────────────────────────┐
│   📷 (高亮显示)                  │
│   松开鼠标即可上传               │
│   支持多图融合（最多4张）        │
└─────────────────────────────────┘
```

**已上传多图时**：
```
┌─────────────────────────────────┐
│ 参考图（可选）  🎭 多图融合模式│
├──────────────┬─────────────────┤
│  [图1] ×     │   [图2] ×       │
│   1          │    2            │
├──────────────┴─────────────────┤
│ + 添加更多图片 (2/4)            │
└─────────────────────────────────┘
```

---

## 🚀 快速开始

### 5分钟上手多图融合

**第1分钟**：
1. 准备2-3张相关图片
2. 访问 http://localhost:3000/create

**第2分钟**：
3. 拖拽图片到"参考图"区域
4. 确认看到"🎭 多图融合模式"徽章

**第3分钟**：
5. 点击"多图融合提示词模板"
6. 选择合适的模板（如"风格融合"）

**第4分钟**：
7. 编辑提示词（可选）
8. 选择图片比例和风格

**第5分钟**：
9. 点击"开始创作"
10. 等待10-30秒，查看融合结果！

---

## ❓ 常见问题

### Q1：最多支持几张图片？

**A**：最多4张。

**原因**：
- 更多图片会增加AI处理复杂度
- 可能导致融合效果混乱
- 4张已足够大多数场景

### Q2：图片顺序重要吗？

**A**：**有影响**。

- 第1张图通常被AI视为"主要参考"
- 后续图片为"辅助参考"
- 可以在提示词中明确指定（如"第1张的构图"）

### Q3：单图模式还能用吗？

**A**：**完全可以！**

- 上传1张图 = 单图图生图模式（原功能）
- 上传2-4张图 = 多图融合模式（新功能）
- 不上传图 = 纯文生图模式（原功能）

### Q4：所有模型都支持多图吗？

**A**：大部分支持。

✅ **推荐模型**：
- gemini-2.5-flash-image（最佳）
- qwen-image

⚠️ **部分支持**：
- seedream系列（可能只使用第1张）

### Q5：融合效果不理想怎么办？

**A**：尝试以下方法：

1. **调整提示词**：更明确地描述融合方式
2. **减少图片数量**：4张改为2-3张
3. **选择相关图片**：确保图片之间有关联
4. **换个模型**：不同模型融合效果不同

---

## 📊 功能对比

### 单图 vs 多图模式

| 维度 | 单图模式 | 多图融合模式 |
|------|----------|--------------|
| 图片数量 | 1张 | 2-4张 |
| 表达能力 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 创作自由度 | 中等 | 极高 |
| 适用场景 | 基础创作 | 高级创作 |
| 技术难度 | 简单 | 简单 |
| 处理时间 | 10-20秒 | 15-30秒 |

---

## 🎉 **开始你的多图融合创作之旅！**

### 立即尝试

```bash
npm run dev
访问 http://localhost:3000/create
上传2张以上图片
体验多图融合的魔力！
```

### 推荐实验

1. **风格实验**：上传不同风格的艺术作品，看AI如何融合
2. **色彩实验**：上传不同色调的图片，测试色彩融合
3. **场景实验**：上传不同场景，生成创意合成

---

## 🔗 相关功能

- **提示词画廊**：浏览精选提示词
- **快捷模式**：一键快速创作
- **AI助手**：获取创作建议
- **历史记录**：查看过往作品

---

## 🎊 **功能已上线，开始创作吧！** 🎨✨🚀

**提示**：多图融合需要更精准的提示词，建议使用提供的模板作为起点！

